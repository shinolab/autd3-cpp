#pragma once

/* Warning, this file is autogenerated by cbindgen. Don't modify this manually. */

#include <cstdint>

namespace autd3::native_methods {

struct ResultController {
  ControllerPtr result;
  uint32_t err_len;
  const void* err;
};

struct SenderOption {
  Duration send_interval;
  Duration receive_interval;
  OptionDuration timeout;
};

struct FPGAStateListPtr {
  const void *_0;
};

struct ResultFPGAStateList {
  FPGAStateListPtr result;
  uint32_t err_len;
  const void* err;
};

struct FirmwareVersionListPtr {
  const void *_0;
};

struct ResultFirmwareVersionList {
  FirmwareVersionListPtr result;
  uint32_t err_len;
  const void* err;
};

struct FixedCompletionTime {
  Duration intensity;
  Duration phase;
  bool strict;
};

struct GroupGainMapPtr {
  const void *_0;
};

struct SineOption {
  uint8_t intensity;
  uint8_t offset;
  Angle phase;
  bool clamp;
  uint16_t sampling_config_div;
};

struct FourierOption {
  bool has_scale_factor;
  float scale_factor;
  bool clamp;
  uint8_t offset;
};

struct SquareOption {
  uint8_t low;
  uint8_t high;
  float duty;
  uint16_t sampling_config_div;
};

extern "C" {

[[nodiscard]]
ResultController AUTDControllerOpen(const Point3 *pos,
                                    const Quaternion *rot,
                                    uint16_t len,
                                    LinkPtr link,
                                    SenderOption option,
                                    SleeperTag sleeper);

[[nodiscard]] ResultStatus AUTDControllerClose(ControllerPtr cnt);

[[nodiscard]] ResultFPGAStateList AUTDControllerFPGAState(ControllerPtr cnt);

int16_t AUTDControllerFPGAStateGet(FPGAStateListPtr p, uint32_t idx);

void AUTDControllerFPGAStateDelete(FPGAStateListPtr p);

[[nodiscard]] ResultFirmwareVersionList AUTDControllerFirmwareVersionListPointer(ControllerPtr cnt);

void AUTDControllerFirmwareVersionGet(FirmwareVersionListPtr p_info_list, uint32_t idx, char *info);

void AUTDControllerFirmwareVersionListPointerDelete(FirmwareVersionListPtr p_info_list);

void AUTDFirmwareLatest(char *latest);

void AUTDSetDefaultSenderOption(ControllerPtr cnt, SenderOption option);

[[nodiscard]] SenderPtr AUTDSender(ControllerPtr cnt, SenderOption option, SleeperTag sleeper);

[[nodiscard]] ResultStatus AUTDSenderSend(SenderPtr sender, DatagramPtr d);

[[nodiscard]] bool AUTDSenderOptionIsDefault(SenderOption option);

[[nodiscard]] DatagramPtr AUTDDatagramClear();

[[nodiscard]]
DatagramPtr AUTDDatagramForceFan(const void* f,
                                 const void* context,
                                 GeometryPtr geometry);

[[nodiscard]]
DatagramPtr AUTDDatagramGPIOOutputs(const void* f,
                                    const void* context,
                                    GeometryPtr geometry);

[[nodiscard]]
DatagramPtr AUTDDatagramGroup(const void* f,
                              const void* context,
                              GeometryPtr geometry,
                              const int32_t *keys,
                              const DatagramPtr *d,
                              uint16_t n);

[[nodiscard]]
DatagramPtr AUTDDatagramOutputMaskWithSegment(const void* f,
                                              const void* context,
                                              GeometryPtr geometry,
                                              Segment segment);

[[nodiscard]]
DatagramPtr AUTDDatagramPhaseCorr(const void* f,
                                  const void* context,
                                  GeometryPtr geometry);

[[nodiscard]]
DatagramPtr AUTDDatagramPulseWidthEncoder(const void* f,
                                          const void* context,
                                          GeometryPtr geometry);

[[nodiscard]] DatagramPtr AUTDDatagramPulseWidthEncoderDefault();

[[nodiscard]]
DatagramPtr AUTDDatagramReadsFPGAState(const void* f,
                                       const void* context,
                                       GeometryPtr geometry);

[[nodiscard]]
DatagramPtr AUTDDatagramSwapSegmentModulation(Segment segment,
                                              TransitionModeWrap transition_mode);

[[nodiscard]]
DatagramPtr AUTDDatagramSwapSegmentFociSTM(Segment segment,
                                           TransitionModeWrap transition_mode);

[[nodiscard]]
DatagramPtr AUTDDatagramSwapSegmentGainSTM(Segment segment,
                                           TransitionModeWrap transition_mode);

[[nodiscard]] DatagramPtr AUTDDatagramSwapSegmentGain(Segment segment);

[[nodiscard]] DatagramPtr AUTDDatagramSilencerFromUpdateRate(FixedUpdateRate config);

[[nodiscard]] DatagramPtr AUTDDatagramSilencerFromCompletionSteps(FixedCompletionSteps config);

[[nodiscard]] DatagramPtr AUTDDatagramSilencerFromCompletionTime(FixedCompletionTime config);

[[nodiscard]] bool AUTDDatagramSilencerFixedCompletionStepsIsDefault(FixedCompletionSteps config);

[[nodiscard]] ResultSamplingConfig AUTDSTMConfigFromFreq(float f, uint16_t n);

[[nodiscard]] ResultSamplingConfig AUTDSTMConfigFromPeriod(Duration p, uint16_t n);

[[nodiscard]] SamplingConfigWrap AUTDSTMConfigFromFreqNearest(float f, uint16_t n);

[[nodiscard]] SamplingConfigWrap AUTDSTMConfigFromPeriodNearest(Duration p, uint16_t n);

[[nodiscard]]
FociSTMPtr AUTDSTMFoci(SamplingConfigWrap config,
                       const void* points,
                       uint16_t size,
                       uint8_t n);

[[nodiscard]]
DatagramPtr AUTDSTMFociIntoDatagramWithSegment(FociSTMPtr stm,
                                               uint8_t n,
                                               Segment segment,
                                               TransitionModeWrap transition_mode);

[[nodiscard]]
DatagramPtr AUTDSTMFociIntoDatagramWithFiniteLoop(FociSTMPtr stm,
                                                  uint8_t n,
                                                  Segment segment,
                                                  TransitionModeWrap transition_mode,
                                                  uint16_t loop_count);

[[nodiscard]] DatagramPtr AUTDSTMFociIntoDatagram(FociSTMPtr stm, uint8_t n);

[[nodiscard]]
GainSTMPtr AUTDSTMGain(SamplingConfigWrap config,
                       const GainPtr *gains,
                       uint16_t size,
                       GainSTMOption option);

[[nodiscard]]
DatagramPtr AUTDSTMGainIntoDatagramWithSegment(GainSTMPtr stm,
                                               Segment segment,
                                               TransitionModeWrap transition_mode);

[[nodiscard]]
DatagramPtr AUTDSTMGainIntoDatagramWithFiniteLoop(GainSTMPtr stm,
                                                  Segment segment,
                                                  TransitionModeWrap transition_mode,
                                                  uint16_t loop_count);

[[nodiscard]] DatagramPtr AUTDSTMGainIntoDatagram(GainSTMPtr stm);

[[nodiscard]] DatagramPtr AUTDDatagramSynchronize();

[[nodiscard]] DatagramPtr AUTDDatagramTuple(DatagramPtr d1, DatagramPtr d2);

[[nodiscard]] DcSysTime AUTDDcSysTimeNew(uint64_t sys_time);

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeNone();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeBaseSignal();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeThermo();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeForceFan();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeSync();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeModSegment();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeModIdx(uint16_t value);

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeStmSegment();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeStmIdx(uint16_t value);

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeIsStmMode();

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypePwmOut(TransducerPtr value);

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeDirect(bool value);

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeSysTimeEq(DcSysTime sys_time);

[[nodiscard]] GPIOOutputTypeWrap AUTDGPIOOutputTypeSyncDiff();

[[nodiscard]] uint8_t AUTDPhaseFromRad(float value);

[[nodiscard]] float AUTDPhaseToRad(Phase value);

[[nodiscard]] PulseWidth AUTDPulseWidth(uint32_t value);

[[nodiscard]] ResultPulseWidth AUTDPulseWidthFromDuty(float duty);

[[nodiscard]] ResultU16 AUTDPulseWidthPulseWidth(PulseWidth pulse_width);

[[nodiscard]] ResultSamplingConfig AUTDSamplingConfigFromDivide(uint16_t div);

[[nodiscard]] SamplingConfigWrap AUTDSamplingConfigFromFreq(float f);

[[nodiscard]] SamplingConfigWrap AUTDSamplingConfigFromPeriod(Duration p);

[[nodiscard]] SamplingConfigWrap AUTDSamplingConfigIntoNearest(SamplingConfigWrap config);

[[nodiscard]] ResultU16 AUTDSamplingConfigDivide(SamplingConfigWrap c);

[[nodiscard]] ResultF32 AUTDSamplingConfigFreq(SamplingConfigWrap c);

[[nodiscard]] ResultDuration AUTDSamplingConfigPeriod(SamplingConfigWrap c);

[[nodiscard]] bool AUTDSamplingConfigEq(SamplingConfigWrap a, SamplingConfigWrap b);

[[nodiscard]] TransitionModeWrap AUTDTransitionModeSyncIdx();

[[nodiscard]] TransitionModeWrap AUTDTransitionModeSysTime(DcSysTime sys_time);

[[nodiscard]] TransitionModeWrap AUTDTransitionModeGPIO(GPIOIn gpio);

[[nodiscard]] TransitionModeWrap AUTDTransitionModeExt();

[[nodiscard]] TransitionModeWrap AUTDTransitionModeImmediate();

[[nodiscard]] TransitionModeWrap AUTDTransitionModeLater();

[[nodiscard]] EnvironmentPtr AUTDEnvironment(ControllerPtr cnt);

[[nodiscard]] float AUTDEnvironmentGetSoundSpeed(EnvironmentPtr env);

void AUTDEnvironmentSetSoundSpeed(EnvironmentPtr env, float value);

void AUTDEnvironmentSetSoundSpeedFromTemp(EnvironmentPtr env,
                                          float temp,
                                          float k,
                                          float r,
                                          float m);

[[nodiscard]] float AUTDEnvironmentWavelength(EnvironmentPtr env);

[[nodiscard]] float AUTDEnvironmentWavenumber(EnvironmentPtr env);

[[nodiscard]]
DatagramPtr AUTDGainIntoDatagramWithSegment(GainPtr gain,
                                            Segment segment,
                                            TransitionModeWrap transition_mode);

[[nodiscard]] DatagramPtr AUTDGainIntoDatagram(GainPtr gain);

[[nodiscard]] GainPtr AUTDGainBessel(Point3 pos, Vector3 dir, Angle theta, BesselOption option);

[[nodiscard]] bool AUTDGainBesselIsDefault(BesselOption option);

[[nodiscard]] GainPtr AUTDGainCustom(const void* f, const void* context, GeometryPtr geometry);

[[nodiscard]] GainPtr AUTDGainFocus(Point3 pos, FocusOption option);

[[nodiscard]] bool AUTDGainFocusIsDefault(FocusOption option);

[[nodiscard]]
GroupGainMapPtr AUTDGainGroupCreateMap(const uint16_t *device_indices_ptr,
                                       uint16_t num_devices);

[[nodiscard]]
GroupGainMapPtr AUTDGainGroupMapSet(GroupGainMapPtr map,
                                    uint16_t dev_idx,
                                    const int32_t *map_data);

[[nodiscard]]
GainPtr AUTDGainGroup(GroupGainMapPtr map,
                      const int32_t *keys_ptr,
                      const GainPtr *values_ptr,
                      uint32_t kv_len);

[[nodiscard]] GainPtr AUTDGainNull();

[[nodiscard]] GainPtr AUTDGainPlane(Vector3 n, PlaneOption option);

[[nodiscard]] bool AUTDGainPlanelIsDefault(PlaneOption option);

[[nodiscard]] GainPtr AUTDGainUniform(Intensity intensity, Phase phase);

[[nodiscard]] GeometryPtr AUTDGeometry(ControllerPtr cnt);

[[nodiscard]] uint32_t AUTDGeometryNumDevices(GeometryPtr geo);

[[nodiscard]] uint32_t AUTDGeometryNumTransducers(GeometryPtr geo);

[[nodiscard]] Point3 AUTDGeometryCenter(GeometryPtr geo);

void AUTDGeometryReconfigure(GeometryPtr geo, const Point3 *pos, const Quaternion *rot);

[[nodiscard]] DevicePtr AUTDDevice(GeometryPtr geo, uint16_t dev_idx);

[[nodiscard]] uint32_t AUTDDeviceNumTransducers(DevicePtr dev);

Point3 AUTDDeviceCenter(DevicePtr dev);

Quaternion AUTDDeviceRotation(DevicePtr dev);

Vector3 AUTDDeviceDirectionX(DevicePtr dev);

Vector3 AUTDDeviceDirectionY(DevicePtr dev);

Vector3 AUTDDeviceDirectionAxial(DevicePtr dev);

Quaternion AUTDRotationFromEulerXYZ(float x, float y, float z);

Quaternion AUTDRotationFromEulerZYZ(float z1, float y, float z2);

[[nodiscard]] TransducerPtr AUTDTransducer(DevicePtr dev, uint8_t idx);

Point3 AUTDTransducerPosition(TransducerPtr tr);

[[nodiscard]] LinkPtr AUTDLinkGet(ControllerPtr cnt);

[[nodiscard]] LinkPtr AUTDLinkAudit();

[[nodiscard]] bool AUTDLinkAuditIsOpen(LinkPtr audit);

void AUTDLinkAuditBreakDown(LinkPtr audit);

void AUTDLinkAuditRepair(LinkPtr audit);

[[nodiscard]] uint32_t AUTDLinkAuditCpuNumTransducers(LinkPtr audit, uint16_t idx);

void AUTDLinkAuditFpgaAssertThermalSensor(LinkPtr audit, uint16_t idx);

void AUTDLinkAuditFpgaDeassertThermalSensor(LinkPtr audit, uint16_t idx);

[[nodiscard]] bool AUTDLinkAuditFpgaIsForceFan(LinkPtr audit, uint16_t idx);

[[nodiscard]] Segment AUTDLinkAuditFpgaCurrentStmSegment(LinkPtr audit, uint16_t idx);

[[nodiscard]] Segment AUTDLinkAuditFpgaCurrentModSegment(LinkPtr audit, uint16_t idx);

[[nodiscard]] bool AUTDLinkAuditFpgaIsStmGainMode(LinkPtr audit, Segment segment, uint16_t idx);

[[nodiscard]] bool AUTDLinkAuditCpuSilencerStrict(LinkPtr audit, uint16_t idx);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaSilencerUpdateRateIntensity(LinkPtr audit, uint16_t idx);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaSilencerUpdateRatePhase(LinkPtr audit, uint16_t idx);

[[nodiscard]]
uint16_t AUTDLinkAuditFpgaSilencerCompletionStepsIntensity(LinkPtr audit,
                                                           uint16_t idx);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaSilencerCompletionStepsPhase(LinkPtr audit, uint16_t idx);

[[nodiscard]] bool AUTDLinkAuditFpgaSilencerFixedCompletionStepsMode(LinkPtr audit, uint16_t idx);

void AUTDLinkAuditFpgaGPIOOutputTypes(LinkPtr audit, uint16_t idx, uint8_t *ty);

void AUTDLinkAuditFpgaDebugValues(LinkPtr audit, uint16_t idx, uint64_t *value);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaStmFreqDivide(LinkPtr audit, Segment segment, uint16_t idx);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaStmCycle(LinkPtr audit, Segment segment, uint16_t idx);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaSoundSpeed(LinkPtr audit, Segment segment, uint16_t idx);

[[nodiscard]] uint16_t AUTDLinkAuditFpgaStmLoopCount(LinkPtr audit, Segment segment, uint16_t idx);

[[nodiscard]]
uint16_t AUTDLinkAuditFpgaModulationFreqDivide(LinkPtr audit,
                                               Segment segment,
                                               uint16_t idx);

[[nodiscard]]
uint16_t AUTDLinkAuditFpgaModulationCycle(LinkPtr audit,
                                          Segment segment,
                                          uint16_t idx);

void AUTDLinkAuditFpgaModulationBuffer(LinkPtr audit,
                                       Segment segment,
                                       uint16_t idx,
                                       uint8_t *data,
                                       uint32_t size);

[[nodiscard]]
uint16_t AUTDLinkAuditFpgaModulationLoopCount(LinkPtr audit,
                                              Segment segment,
                                              uint16_t idx);

void AUTDLinkAuditFpgaDrivesAt(LinkPtr audit,
                               Segment segment,
                               uint16_t idx,
                               uint16_t stm_idx,
                               Drive *drive);

void AUTDLinkAuditFpgaPulseWidthEncoderTable(LinkPtr audit, uint16_t idx, uint64_t *dst);

[[nodiscard]] LinkPtr AUTDLinkNop();

[[nodiscard]] SamplingConfigWrap AUTDModulationSamplingConfig(ModulationPtr m);

[[nodiscard]]
DatagramPtr AUTDModulationIntoDatagramWithSegment(ModulationPtr m,
                                                  Segment segment,
                                                  TransitionModeWrap transition_mode);

[[nodiscard]]
DatagramPtr AUTDModulationIntoDatagramWithFiniteLoop(ModulationPtr m,
                                                     Segment segment,
                                                     TransitionModeWrap transition_mode,
                                                     uint16_t loop_count);

[[nodiscard]] DatagramPtr AUTDModulationIntoDatagram(ModulationPtr m);

[[nodiscard]]
ModulationPtr AUTDModulationCustom(const uint8_t *ptr,
                                   uint16_t len,
                                   SamplingConfigWrap sampling_config);

[[nodiscard]]
ModulationPtr AUTDModulationWithFir(ModulationPtr m,
                                    const float *coef,
                                    uint32_t n_tap);

[[nodiscard]]
ModulationPtr AUTDModulationFourierExact(const uint32_t *sine_freq,
                                         const SineOption *sine_option,
                                         uint32_t size,
                                         FourierOption option);

[[nodiscard]]
ModulationPtr AUTDModulationFourierExactFloat(const float *sine_freq,
                                              const SineOption *sine_option,
                                              uint32_t size,
                                              FourierOption option);

[[nodiscard]]
ModulationPtr AUTDModulationFourierNearest(const float *sine_freq,
                                           const SineOption *sine_option,
                                           uint32_t size,
                                           FourierOption option);

[[nodiscard]] ModulationPtr AUTDModulationWithRadiationPressure(ModulationPtr m);

[[nodiscard]] ModulationPtr AUTDModulationSineExact(uint32_t freq, SineOption option);

[[nodiscard]] ModulationPtr AUTDModulationSineExactFloat(float freq, SineOption option);

[[nodiscard]] ModulationPtr AUTDModulationSineNearest(float freq, SineOption option);

[[nodiscard]] bool AUTDModulationSineIsDefault(SineOption option);

[[nodiscard]] ModulationPtr AUTDModulationSquareExact(uint32_t freq, SquareOption option);

[[nodiscard]] ModulationPtr AUTDModulationSquareExactFloat(float freq, SquareOption option);

[[nodiscard]] ModulationPtr AUTDModulationSquareNearest(float freq, SquareOption option);

[[nodiscard]] bool AUTDModulationSquareIsDefault(SquareOption option);

[[nodiscard]] ModulationPtr AUTDModulationStatic(uint8_t intensity);

[[nodiscard]] bool AUTDModulationStaticIsDefault(uint8_t intensity);

void AUTDGetErr(const void* src, char *dst);

}  // extern "C"

}  // namespace autd3::native_methods
